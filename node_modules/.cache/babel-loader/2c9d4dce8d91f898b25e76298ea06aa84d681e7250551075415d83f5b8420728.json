{"ast":null,"code":"import _regeneratorRuntime from\"/media/michrezq/MICHAEL/Software Engineering/HRSystem/Task/HRSystem/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/media/michrezq/MICHAEL/Software Engineering/HRSystem/Task/HRSystem/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/media/michrezq/MICHAEL/Software Engineering/HRSystem/Task/HRSystem/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),emailError=_useState6[0],setEmailError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),serverError=_useState10[0],setServerError=_useState10[1];var validateForm=function validateForm(){var isValid=true;// Validate email\nif(!email.trim()){setEmailError(\"Email is required\");isValid=false;}else{setEmailError(\"\");}// Validate password\nif(!password.trim()){setPasswordError(\"Password is required\");isValid=false;}else{setPasswordError(\"\");}return isValid;};var submitLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!validateForm()){_context.next=14;break;}_context.prev=2;_context.next=5;return axios.post(\"http://127.0.0.1:8000/auth/login/\",{email:email,password:password});case 5:response=_context.sent;// Clear previous errors\nsetServerError(\"\");// Proceed with success\nif(response.status===200){localStorage.setItem(\"access_token\",response.data.tokens.access);localStorage.setItem(\"refresh_token\",response.data.tokens.refresh);window.location.href=\"/\";}else{setServerError(response.data.message);}console.log(response.status);//  \n_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);// Handle server-side errors\nif(_context.t0.response&&_context.t0.response.data){message=_context.t0.response.data.message;setServerError(message);}else{setServerError(\"Invalid email or password\");}case 14:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function submitLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:submitLogin,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},isInvalid:!!emailError||!!serverError}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:emailError||serverError})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},isInvalid:!!passwordError||!!serverError}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:passwordError||serverError})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit\"})]})});};export default Login;","map":{"version":3,"names":["React","useState","Button","Form","axios","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","emailError","setEmailError","_useState7","_useState8","passwordError","setPasswordError","_useState9","_useState10","serverError","setServerError","validateForm","isValid","trim","submitLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","message","wrap","_callee$","_context","prev","next","preventDefault","post","sent","status","localStorage","setItem","data","tokens","access","refresh","window","location","href","console","log","t0","stop","_x","apply","arguments","className","children","onSubmit","Group","controlId","Label","Control","type","placeholder","value","onChange","target","isInvalid","Feedback","variant"],"sources":["/media/michrezq/MICHAEL/Software Engineering/HRSystem/Task/HRSystem/frontend/src/pages/Registeration/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport axios  from \"axios\";\nconst Login = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [serverError, setServerError] = useState(\"\");\n\n  const validateForm = () => {\n    let isValid = true;\n\n    // Validate email\n    if (!email.trim()) {\n      setEmailError(\"Email is required\");\n      isValid = false;\n    } else {\n      setEmailError(\"\");\n    }\n\n    // Validate password\n    if (!password.trim()) {\n      setPasswordError(\"Password is required\");\n      isValid = false;\n    } else {\n      setPasswordError(\"\");\n    }\n\n    return isValid;\n  };\n\n  const submitLogin = async (e) => {\n    e.preventDefault();\n\n    if (validateForm()) {\n      try {\n        const response = await axios.post(\"http://127.0.0.1:8000/auth/login/\", {\n          email,\n          password,\n        });\n\n        // Clear previous errors\n        setServerError(\"\");\n        \n        // Proceed with success\n        if (response.status===200) {\n          localStorage.setItem(\"access_token\", response.data.tokens.access);\n          localStorage.setItem(\"refresh_token\", response.data.tokens.refresh);\n          window.location.href = \"/\";\n        } else {\n          setServerError(response.data.message);\n        }\n        console.log(response.status);\n      //  \n      } catch (error) {\n        // Handle server-side errors\n        if (error.response && error.response.data) {\n          const { message } = error.response.data;\n          setServerError(message);\n        } else {\n          setServerError(\"Invalid email or password\");\n        }\n      }\n    }\n  };\n\n  return (\n    <div className=\"center\">\n      <Form onSubmit={submitLogin}>\n        <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n          <Form.Label>Email address</Form.Label>\n          <Form.Control\n            type=\"email\"\n            placeholder=\"Enter email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            isInvalid={!!emailError || !!serverError}\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            {emailError || serverError}\n          </Form.Control.Feedback>\n        </Form.Group>\n        <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            isInvalid={!!passwordError || !!serverError}\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            {passwordError || serverError}\n          </Form.Control.Feedback>\n        </Form.Group>\n        <Button variant=\"primary\" type=\"submit\">\n          Submit\n        </Button>\n      </Form>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}